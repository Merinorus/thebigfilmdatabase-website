{% extends "layout.html" %}
{% block title %}
    The biggest photographic film database in the world
{% endblock title %}
{% block content %}
    <footer class="footer">
        <p>
            The biggest photographic film database in the world! Search by name, code or DX number.
            <br>
            Find when a film is discontinued, who made it, who rebrands it. Have fun!
        </p>
    </footer>
    <aside class="dxblock">
        <h3>
            Search a film by DX number
            <br>
            <br>
            <img src="{{ url_for('static', path='images/dx_code.webp') }}"
                 alt="Canister with a Dx code"
                 width="300"
                 height="158"
                 loading="lazy">
        </h3>
        <form action='{{ url_for("search") }}'
              method="get"
              name="search-by-dx-full"
              id="search-by-dx-full">
        </form>
        <form action='{{ url_for("search") }}'
              method="get"
              name="search-by-dx-parts"
              id="search-by-dx-parts">
        </form>
        <p>
            <br>
            Search by DX full number (6 digits):
            <br>
            <input minlength="1"
                   maxlength="6"
                   pattern="[0-9]+"
                   type="text"
                   name="dx_full"
                   placeholder="DX full barcode (6 digits)"
                   form="search-by-dx-full">
            <button type="submit" form="search-by-dx-full">Search</button>
            <br>
            <br>
            Search by DX number parts 1 and 2:
            <br>
            <input minlength="1"
                   maxlength="10"
                   pattern="[0-9]+.+[0-9]+.*"
                   type="text"
                   name="dx_number"
                   placeholder="DX number (eg: 115-10)"
                   form="search-by-dx-parts">
            <button type="submit" form="search-by-dx-parts">Search</button>
        </p>
    </aside>
    <article class="filmblock">
        <h3>
            Search a film by name
            <br>
            <br>
            <img src="{{ url_for('static', path='images/films.webp') }}"
                 alt="Funny films"
                 width="300"
                 height="158"
                 loading="lazy">
        </h3>
        <form action='{{ url_for("search") }}'
              method="get"
              name="search-film"
              id="search-film">
        </form>
        <p>
            <br>
            Please enter the model name (eg: Lomography APX400).
            <br>
            You can also filter by manufacturer (eg: Agfa):
            <br>
            <input maxlength="255"
                   type="text"
                   name="name"
                   id="film_name"
                   autocomplete="35mm-film-name"
                   placeholder="Model Name"
                   size="20"
                   form="search-film">
            <input maxlength="255"
                   type="text"
                   id="film_manufacturer"
                   name="manufacturer"
                   autocomplete="35mm-film-manufacturer"
                   placeholder="Manufacturer"
                   size="8"
                   form="search-film">
            <button type="submit" form="search-film">Search</button>
            <br>
            <br>
        </p>
    </article>
    <article class="filmblock">
        <h3>
            Search with your camera
            <p id="camera-activate">
                <canvas style="display:none" id="barcodescancanvas" width="300" height="225"></canvas>
                <img width="300"
                     height="225"
                     id="barcodescanenableimg"
                     src="{{ url_for('static', path='images/enable_camera.png') }}"
                     alt="Activate Camera" />
            </p>
        </h3>
        <form action='{{ url_for("search") }}'
              method="get"
              name="search-film"
              id="search-film">
        </form>
        <p>
            <noscript>
                <div style="color: red; font-size: 16px;">
                    <p>This feature needs JavaScript to be enabled.</p>
                </div>
            </noscript>
            <br>
            Scan directly the barcode on the cassette or on the 35mm film.
            <br>
            Camera:
            <select id="cameraSelector"></select>
            <select style="display:none" id="dxformat">
                <option value="DXFilmEdge,ITF">DXFilmEdge,ITF</option>
            </select>
            <select style="display:none" id="mode">
                <option value="true" selected=""></option>
            </select>
            <div id="result" style="display:none"></div>
            <script src="{{ url_for('static', path='scripts/zxing_reader.js') }}?ver=1"
                    defer></script>
            <script src="{{ url_for('static', path='scripts/barcode_scanner.js') }}?ver=8"
                    defer></script>
            <br>
            <br>
        </p>
    </article>
{% endblock content %}
{% block footer %}
    <p>
        {{ total_count }} films in database.
        <br>
        Random film: <a href="{{ url_for('read_film', url_name=film.url_name) }}">{{ film.name }}</a>
    </p>
{% endblock footer %}
